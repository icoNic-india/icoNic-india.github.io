<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup theme-color -->
<!-- start theme color meta headers -->
<meta name="theme-color" content="#151515">
<meta name="msapplication-navbutton-color" content="#151515">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- end theme color meta headers -->


<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta name="author" content="icoNic" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction to the Windows API ‚Äì Beginner-Friendly Guide" />
<meta property="og:description" content="Introduction to the Windows API ‚Äì Beginner-Friendly Guide" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-09-24T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"icoNic"},"dateModified":"2025-09-24T00:00:00+00:00","datePublished":"2025-09-24T00:00:00+00:00","description":"Introduction to the Windows API ‚Äì Beginner-Friendly Guide","mainEntityOfPage":{"@type":"WebPage","@id":"/2025/09/24/malware-series-3-introduction-to-windows-api.html"},"url":"/2025/09/24/malware-series-3-introduction-to-windows-api.html"}</script>
<!-- End Jekyll SEO tag -->


    <style>
    /* Mobile-friendly adjustment for floating Home button */
    @media (max-width: 600px) {
      a[style*="position: fixed"] {
        top: 10px;
        right: 10px;
        padding: 8px 12px;
        font-size: 14px;
      }
    }
    </style>
  </head>

  <body>
    <!-- Floating Home Button -->
    
  <!-- Floating Home Button -->
  <a href="/" 
     style="
       position: fixed;
       top: 20px;
       right: 20px;
       padding: 10px 16px;
       background-color: #111;
       color: #33ff33;
       border: 2px solid #33ff33;
       border-radius: 6px;
       font-family: 'Courier New', monospace;
       font-weight: bold;
       text-decoration: none;
       cursor: pointer;
       transition: all 0.2s ease-in-out;
       z-index: 9999;
     "
     onmouseover="this.style.backgroundColor='#33ff33'; this.style.color='#111';"
     onmouseout="this.style.backgroundColor='#111'; this.style.color='#33ff33';"
  >
     üè† Home
  </a>



    <!-- Page Content -->
    <div class="container">
      <section id="main_content">
        <small>24 September 2025</small>
<h1></h1>

<p class="view">by icoNic</p>

<div style="margin-bottom: 20px;">
  <button onclick="window.history.back();" 
          style="
            padding: 10px 16px; 
            background-color: #111; 
            color: #ff3333; 
            border: 2px solid #ff3333; 
            border-radius: 6px; 
            font-family: 'Courier New', monospace; 
            font-weight: bold; 
            cursor: pointer;
            transition: all 0.2s ease-in-out;
          "
          onmouseover="this.style.backgroundColor='#ff3333'; this.style.color='#111';"
          onmouseout="this.style.backgroundColor='#111'; this.style.color='#ff3333';"
  >
    ‚Üê Back
  </button>
</div>

<h1 id="introduction-to-the-windows-api--beginner-friendly-guide">Introduction to the Windows API ‚Äì Beginner-Friendly Guide</h1>

<p>The Windows API allows developers to interact directly with the Windows operating system.<br />
Whether you want to <strong>create a file</strong>, <strong>query the registry</strong>, or <strong>communicate with processes</strong>, Windows API provides the tools you need.</p>

<hr />

<h2 id="common-windows-data-types">Common Windows Data Types</h2>

<p>Windows defines its own types to make programs portable across <strong>32-bit</strong> and <strong>64-bit</strong> systems.</p>

<p>Some of the most important ones:</p>

<ul>
  <li><strong>SIZE_T</strong> ‚Üí Used for sizes of objects (varies with system architecture).
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SIZE_T</span> <span class="n">sVariable</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li><strong>HANDLE</strong> ‚Üí A reference to something Windows manages (like a file, process, or thread).
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HANDLE</span> <span class="n">hFile</span> <span class="o">=</span> <span class="n">CreateFile</span><span class="p">(...);</span>
</code></pre></div>    </div>
  </li>
  <li><strong>LPCSTR / PCSTR</strong> ‚Üí Pointer to a constant ANSI string (8-bit characters).
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LPCSTR</span> <span class="n">str</span> <span class="o">=</span> <span class="s">"Hello, world!"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li><strong>LPCWSTR / PCWSTR</strong> ‚Üí Pointer to a constant Unicode string (16-bit wide characters).
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LPCWSTR</span> <span class="n">str</span> <span class="o">=</span> <span class="s">L"Hello, world!"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>üí° <strong>Tip</strong>: If the type name starts with <strong>P</strong> (like <code class="language-plaintext highlighter-rouge">PVOID</code>), it means it‚Äôs a pointer to that type.</p>

<hr />

<h2 id="ansi-vs-unicode-functions">ANSI vs Unicode Functions</h2>

<p>Most Windows API functions come in two flavors:</p>

<ul>
  <li>Functions ending with <strong>A</strong> ‚Üí Use <strong>ANSI</strong> (8-bit characters).</li>
  <li>Functions ending with <strong>W</strong> ‚Üí Use <strong>Unicode</strong> (16-bit characters).</li>
</ul>

<p>Example:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ANSI version</span>
<span class="n">CreateFileA</span><span class="p">(</span><span class="s">"C:</span><span class="se">\\</span><span class="s">temp</span><span class="se">\\</span><span class="s">file.txt"</span><span class="p">,</span> <span class="p">...);</span>

<span class="c1">// Unicode version</span>
<span class="n">CreateFileW</span><span class="p">(</span><span class="s">L"C:</span><span class="se">\\</span><span class="s">temp</span><span class="se">\\</span><span class="s">file.txt"</span><span class="p">,</span> <span class="p">...);</span>
</code></pre></div></div>

<p>üëâ If you‚Äôre working on modern Windows, <strong>always prefer the Unicode (<code class="language-plaintext highlighter-rouge">W</code>) version</strong>.</p>

<hr />

<h2 id="in-and-out-parameters">In and Out Parameters</h2>

<p>Some functions take <strong>input parameters (IN)</strong>, while others use <strong>output parameters (OUT)</strong> to return data back.</p>

<p>Example:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">BOOL</span> <span class="nf">HackTheWorld</span><span class="p">(</span><span class="n">OUT</span> <span class="kt">int</span><span class="o">*</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">*</span><span class="n">num</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>   <span class="c1">// sets value of num</span>
    <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">HackTheWorld</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>   <span class="c1">// after call, a == 123</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here, <code class="language-plaintext highlighter-rouge">num</code> is an <strong>out parameter</strong> because the function writes a value into it.</p>

<hr />

<h2 id="a-real-example--creating-a-file-with-createfilew">A Real Example ‚Äì Creating a File with <code class="language-plaintext highlighter-rouge">CreateFileW</code></h2>

<p>Let‚Äôs say we want to create a file called <code class="language-plaintext highlighter-rouge">malware.txt</code> on the Desktop.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">HANDLE</span> <span class="n">hFile</span> <span class="o">=</span> <span class="n">INVALID_HANDLE_VALUE</span><span class="p">;</span>

    <span class="c1">// File path ‚Äì note the double backslashes</span>
    <span class="n">LPCWSTR</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">L"C:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">iconic</span><span class="se">\\</span><span class="s">Desktop</span><span class="se">\\</span><span class="s">malware.txt"</span><span class="p">;</span>

    <span class="c1">// Create the file</span>
    <span class="n">hFile</span> <span class="o">=</span> <span class="n">CreateFileW</span><span class="p">(</span>
        <span class="n">filePath</span><span class="p">,</span>              <span class="c1">// File path</span>
        <span class="n">GENERIC_ALL</span><span class="p">,</span>           <span class="c1">// Full access</span>
        <span class="mi">0</span><span class="p">,</span>                     <span class="c1">// Do not share</span>
        <span class="nb">NULL</span><span class="p">,</span>                  <span class="c1">// Security attributes</span>
        <span class="n">CREATE_ALWAYS</span><span class="p">,</span>         <span class="c1">// Always create new</span>
        <span class="n">FILE_ATTRIBUTE_NORMAL</span><span class="p">,</span> <span class="c1">// Normal file</span>
        <span class="nb">NULL</span>                   <span class="c1">// Template</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">hFile</span> <span class="o">==</span> <span class="n">INVALID_HANDLE_VALUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[-] Failed! Error: %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">GetLastError</span><span class="p">());</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"[+] File created successfully!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">CloseHandle</span><span class="p">(</span><span class="n">hFile</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>üëâ Run this program, and you should see <code class="language-plaintext highlighter-rouge">malware.txt</code> appear on your Desktop.</p>

<hr />

<h2 id="debugging-errors">Debugging Errors</h2>

<p>If something goes wrong, Windows APIs often return generic error codes (like <code class="language-plaintext highlighter-rouge">INVALID_HANDLE_VALUE</code>).<br />
To get more details, call <code class="language-plaintext highlighter-rouge">GetLastError()</code>:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">DWORD</span> <span class="n">error</span> <span class="o">=</span> <span class="n">GetLastError</span><span class="p">();</span>
<span class="n">printf</span><span class="p">(</span><span class="s">"Error code: %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
</code></pre></div></div>

<p>Some common error codes:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">2</code> ‚Üí File not found</li>
  <li><code class="language-plaintext highlighter-rouge">5</code> ‚Üí Access denied</li>
  <li><code class="language-plaintext highlighter-rouge">87</code> ‚Üí Invalid parameter</li>
</ul>

<hr />

<h2 id="windows-native-api-advanced">Windows Native API (Advanced)</h2>

<p>Beyond the standard Windows API, there‚Äôs the <strong>Native API (NTAPI)</strong>, found in <code class="language-plaintext highlighter-rouge">ntdll.dll</code>.<br />
These functions return an <code class="language-plaintext highlighter-rouge">NTSTATUS</code> code directly, instead of using <code class="language-plaintext highlighter-rouge">GetLastError</code>.</p>

<p>Example:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">NTSTATUS</span> <span class="n">STATUS</span> <span class="o">=</span> <span class="n">NativeSyscallExample</span><span class="p">(...);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">STATUS</span> <span class="o">!=</span> <span class="n">STATUS_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"[!] Failed with status: 0x%0.8X</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">STATUS</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can also use the helper macro:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define NT_SUCCESS(Status) (((NTSTATUS)(Status)) &gt;= 0)
</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">NT_SUCCESS</span><span class="p">(</span><span class="n">STATUS</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"[!] Native call failed: 0x%0.8X</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">STATUS</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="wrapping-up">Wrapping Up</h2>

<p>At first glance, the Windows API can feel overwhelming. But once you understand:</p>

<ul>
  <li>The key data types (<code class="language-plaintext highlighter-rouge">HANDLE</code>, <code class="language-plaintext highlighter-rouge">DWORD</code>, <code class="language-plaintext highlighter-rouge">SIZE_T</code>, etc.)</li>
  <li>The difference between ANSI (<code class="language-plaintext highlighter-rouge">A</code>) and Unicode (<code class="language-plaintext highlighter-rouge">W</code>) functions</li>
  <li>How to debug errors with <code class="language-plaintext highlighter-rouge">GetLastError</code></li>
</ul>

<p>‚Ä¶you‚Äôll be ready to build applications that directly interact with the Windows operating system.</p>

<p>Think of it like <strong>learning how to drive a car with gears</strong>. At first, it feels tricky, but once you get the hang of it, you can go anywhere üöóüí®.</p>



  <small>tags: <em>windows</em> - <em>api</em> - <em>winapi</em> - <em>programming</em> - <em>beginner</em></small>


      </section>
    </div>

    <!-- Global Footer (ALWAYS shows on every page) -->
    <footer style="text-align: center; padding: 1rem; background: #161b22; font-size: 0.9rem; color: #8b949e; border-top: 2px solid #30363d; margin-top: 2rem;">
      ‚ö° ‚ÄúLearning never exhausts the mind.‚Äù ‚Äî Leonardo da Vinci <br>
      ¬© 2025 Iconic Hacks. All rights reserved.
    </footer>
  </body>
</html>
